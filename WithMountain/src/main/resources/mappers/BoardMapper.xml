<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.withmountain.again18.mapper.BoardMapper">

	<sql id="boardColumns">
		  id
		, userId
		, title
		, member
		, date
		, link
		, content
		, gender
		, insertTime
		, updateTime
	</sql>
	

	<insert id="insertBoard" parameterType="com.withmountain.again18.domain.BoardDTO">
		INSERT INTO board(
			<include refid="boardColumns"/>
		) VALUES (
			  #{id}
			, #{userId}
			, #{title}
			, #{member}
			, #{date}
			, #{link}
			, #{content}
			, #{gender}
			, NOW()
			, NULL			
		)
	</insert>
	
	<select id="selectBoardDetail" parameterType="int" resultType="com.withmountain.again18.domain.BoardDTO">
		SELECT
			<include refid="boardColumns"/>
		FROM
			board
		WHERE
			id = #{id}
	</select>
	
	<update id="updateBoard" parameterType="com.withmountain.again18.domain.BoardDTO">
		UPDATE board
		SET
			  updateTime = NOW()
			, id=#{id}
			, userId=#{userId}
			, title=#{title}
			, member=#{member}
			, date=#{date}
			, link=#{link}
			, content=#{content}
			, gender=#{gender}
			
			
		WHERE
			id = #{id}
	</update>
	
	<update id="deleteBoard" parameterType="Long">
		UPDATE board
		
		WHERE
			id=#{id}	
	</update>
	
	
	<select id="selectBoardList" parameterType="com.withmountain.again18.domain.BoardDTO" resultType="com.withmountain.again18.domain.BoardDTO">
		SELECT
			<include refid="boardColumns"/>
		FROM
			board
	
		ORDER BY
			id DESC,
			insertTime DESC
	</select>
	
	<select id="selectBoardTotalCount" parameterType="com.withmountain.again18.domain.BoardDTO" resultType="int">
		SELECT
			COUNT(*)
		FROM
			board
		
	</select>



</mapper>